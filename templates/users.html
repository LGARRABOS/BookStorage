{% extends "base.html" %}
{% block title %}Annuaire des lecteurs{% endblock %}
{% block custom_css %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/users.css') }}">
{% endblock %}
{% block content %}
<h1 class="page-title">Annuaire des lecteurs</h1>
<p class="page-intro">Découvrez les profils publics de la communauté et explorez leurs bibliothèques pour enrichir la vôtre.</p>

<form method="get" class="search-form" role="search" aria-label="Recherche de lecteurs">
    <label for="search" class="sr-only">Rechercher un lecteur</label>
    <div class="search-fields">
        <input type="search" id="search" name="q" value="{{ query }}" placeholder="Pseudo ou nom affiché" autocomplete="off">
        <button type="submit" class="btn btn-primary">Rechercher</button>
        {% if query %}
            <a href="{{ url_for('community_directory') }}" class="btn btn-ghost">Réinitialiser</a>
        {% endif %}
    </div>
</form>

{% if users %}
<ul class="user-grid" role="list">
    {% for user in users %}
    <li class="user-card">
        <a class="user-link" href="{{ url_for('community_profile', user_id=user.id) }}">
            {% if user.avatar_path %}
                <img src="{{ url_for('static', filename=user.avatar_path) }}" alt="Avatar de {{ user.display_name or user.username }}" class="user-avatar">
            {% else %}
                <span class="user-avatar placeholder" aria-hidden="true">{{ (user.display_name or user.username)[:1]|upper }}</span>
            {% endif %}
            <div class="user-text">
                <h2>{{ user.display_name or user.username }}</h2>
                <p class="user-username">@{{ user.username }}</p>
                {% if user.bio %}
                    <p class="user-bio">{{ user.bio }}</p>
                {% else %}
                    <p class="user-bio muted">Ce lecteur n'a pas encore rédigé de biographie.</p>
                {% endif %}
            </div>
        </a>
    </li>
    {% endfor %}
</ul>
{% else %}
<p class="empty-state">Aucun lecteur public ne correspond à votre recherche pour le moment.</p>
{% endif %}
{% endblock %}
